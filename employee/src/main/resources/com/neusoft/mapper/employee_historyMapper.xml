<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC ".//mybaits.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.neusoft.mapper.employee_historyMapper">
    <select id="getJobsHistoryByEmpId"
            resultType="com.neusoft.model.EmployeeHistory"
            parameterType="int">
        SELECT
            id,
            employee_id AS employeeId,
            change_type AS changeType,
            old_value AS oldValue,
            new_value AS newValue,
            change_date AS changeDate,
            end_time AS endTime
        FROM employee_history
        WHERE change_type = 'job'
          AND employee_id = #{empId}
        ORDER BY change_date DESC
    </select>

    <select id="getDeptHistoryByEmpId"
            resultType="com.neusoft.model.EmployeeHistory"
            parameterType="int">
        SELECT
            id,
            employee_id AS employeeId,
            change_type AS changeType,
            old_value AS oldValue,
            new_value AS newValue,
            change_date AS changeDate,
            end_time AS endTime
        FROM employee_history
        WHERE change_type = 'dept'
          AND employee_id = #{empId}
        ORDER BY change_date DESC
    </select>

</mapper>
